<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>1. 应用部署 &#8212; wtxlog 0.1-dev documentation</title>
    
    <link rel="stylesheet" href="_static/flasky.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1-dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="top" title="wtxlog 0.1-dev documentation" href="index.html" />
    <link rel="next" title="2. 模型" href="models.html" />
    <link rel="prev" title="wtxlog (Flask BLOG/CMS)" href="index.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">
  
  

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="models.html" title="2. 模型"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="wtxlog (Flask BLOG/CMS)"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">wtxlog 0.1-dev documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>1. 应用部署<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>基本要求: Python 2.7.X</p>
<div class="section" id="id2">
<h2>1.1. 运行环境<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>APP的运行环境默认会根据服务器环境变量 <code class="docutils literal"><span class="pre">SERVER_SOFTWARE</span></code> 来确定.
BAE/JAE/SAE 这 3 个环境的 <code class="docutils literal"><span class="pre">SERVER_SOFTWARE</span></code> 是固定的;
其他环境可以通过设置机器的环境变量 <code class="docutils literal"><span class="pre">APP_CONFIG</span></code> 来更改默认的运行环境.</p>
<p><strong>LINUX设置方法（示例）</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">APP_CONFIG</span><span class="o">=</span><span class="s">&#39;production&#39;</span> <span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">deploy</span>
</pre></div>
</div>
<p><strong>WINDOWS设置方法（示例）</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span class="nb">set</span> <span class="n">APP_CONFIG</span><span class="o">=</span><span class="n">production</span>
<span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">deploy</span>
</pre></div>
</div>
<p><strong>运行环境说明:</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="42%" />
<col width="58%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">development/default/local</span></code></td>
<td>调试开发环境, 默认的选项, 使用内置服务器,
运行应用时为这个环境</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">production</span></code></td>
<td>生产环境,
一般是指通过 Gunicorn 运行应用时的环境</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">testing</span></code></td>
<td>测试环境</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">bae</span></code></td>
<td>BAE应用引擎环境</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">jae</span></code></td>
<td>JAE应用引擎环境</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">sae</span></code></td>
<td>SAE应用引擎环境</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id3">
<h2>1.2. 部署应用<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">SQLAlchemy 数据库连接 URI 也可通过操作系统环境变量 <code class="docutils literal"><span class="pre">DATABASE_URI</span></code> 设置.</p>
</div>
<div class="section" id="id4">
<h3>1.2.1. 本地环境<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p><strong>本地环境</strong> 是指对操作系统有绝对操作权的环境, 主要指 Windows 和 Linux 开发环境,
以及Linux生产环境.</p>
<p>本地环境通过 pip + virtualenv 方式部署.</p>
<p><strong>下载源码:</strong></p>
<p>从 <a class="reference external" href="https://github.com/wtx358/wtxlog/">https://github.com/wtx358/wtxlog/</a> 下载 wtxlog 最新源代码</p>
<p><strong>安装依赖:</strong></p>
<p>使用 <code class="docutils literal"><span class="pre">requirements/common.txt</span></code> 来安装依赖, 本地环境默认使用SQLite数据库:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">requirements</span><span class="o">/</span><span class="n">common</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p><strong>运行程序:</strong></p>
<p>如果通过 virtualenv 来运行程序, 需要先激活虚拟环境.</p>
<p>初始化数据库:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">deploy</span>
</pre></div>
</div>
<p>运行程序:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">runserver</span>
</pre></div>
</div>
<p>若需要强制开启 debug 和 reload 的模式, 请加上参数 <code class="docutils literal"><span class="pre">-d</span> <span class="pre">-r</span></code>.</p>
</div>
<div class="section" id="bae">
<h3>1.2.2. BAE环境<a class="headerlink" href="#bae" title="Permalink to this headline">¶</a></h3>
<p>参考: <a class="reference internal" href="#secret-key"><span class="std std-ref">SECRET_KEY</span></a> , <a class="reference internal" href="#database"><span class="std std-ref">数据库配置</span></a> , <a class="reference internal" href="#cache"><span class="std std-ref">缓存Cache</span></a></p>
<p><strong>准备工作:</strong></p>
<ol class="arabic simple">
<li>申请 BAE 账号, 创建工程, 解决方案勾选 <strong>使用BAE</strong>, 类型选择 <strong>python-web</strong>,
代码版本工具建议选择 <strong>Git</strong>.</li>
<li>进入 BAE3 应用管理控制台, 开发者服务 -&gt; 应用引擎</li>
<li>在 <strong>扩展服务</strong> 中添加 <strong>BAE MySQL数据库</strong>, 记下数据库相关信息, 后面会用到</li>
<li>在 <strong>扩展服务</strong> 中添加 <strong>Cache 服务</strong> (如果有配额的话), 记下 <strong>资源名称</strong></li>
<li>在 <strong>部署列表</strong> 中 <strong>添加部署</strong>, 类型选择 <strong>python-web</strong>,
使用 SVN 或 GIT 工具将代码 checkout 到本地</li>
</ol>
<p><strong>更改设置:</strong></p>
<ol class="arabic">
<li><p class="first">从 <a class="reference external" href="https://github.com/wtx358/wtxlog/">https://github.com/wtx358/wtxlog/</a> 下载 wtxlog 最新源代码</p>
</li>
<li><p class="first">编辑根目录下的 <code class="docutils literal"><span class="pre">config.py</span></code> 文件</p>
<p>更改 <code class="docutils literal"><span class="pre">SECRET_KEY</span></code> （位于 <code class="docutils literal"><span class="pre">Config</span></code> 类）:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;SECRET_KEY&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="s">&#39;hard to guess string&#39;</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">SECRET_KEY</span></code> 可使用 <code class="docutils literal"><span class="pre">os.urandom(24)</span></code> 随机生成.</p>
<p>更改 BAE 相关信息 （位于 <code class="docutils literal"><span class="pre">BAEConfig</span></code> 类）:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">BAE_AK</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
<span class="n">BAE_SK</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

<span class="c"># BAE MEMCACHE</span>
<span class="n">CACHE_TYPE</span> <span class="o">=</span> <span class="s">&#39;wtxlog.ext.baememcache&#39;</span>
<span class="n">CACHE_BAE_USERNAME</span> <span class="o">=</span> <span class="n">BAE_AK</span>
<span class="n">CACHE_BAE_PASSWORD</span> <span class="o">=</span> <span class="n">BAE_SK</span>
<span class="n">CACHE_BAE_SERVERS</span> <span class="o">=</span> <span class="s">&#39;cache.duapp.com:20243&#39;</span>
<span class="n">CACHE_BAE_ID</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

<span class="c"># mysql configuration</span>
<span class="n">MYSQL_USER</span> <span class="o">=</span> <span class="n">BAE_AK</span>
<span class="n">MYSQL_PASS</span> <span class="o">=</span> <span class="n">BAE_SK</span>
<span class="n">MYSQL_HOST</span> <span class="o">=</span> <span class="s">&#39;sqld.duapp.com&#39;</span>
<span class="n">MYSQL_PORT</span> <span class="o">=</span> <span class="s">&#39;4050&#39;</span>
<span class="n">MYSQL_DB</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
</pre></div>
</div>
<p>若没有启用 Cache 服务或者方便调试, 请把 <code class="docutils literal"><span class="pre">CACHE_TYPE</span></code> 注释掉.</p>
</li>
</ol>
<p><strong>设置依赖:</strong></p>
<p>修改根目录 <code class="docutils literal"><span class="pre">requirements.txt</span></code> 文件内容如下:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="o">-</span><span class="n">r</span> <span class="n">requirements</span><span class="o">/</span><span class="n">bae3</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>应用引擎会自动安装依赖.</p>
<p><strong>上传:</strong></p>
<ol class="arabic simple">
<li>将前面修改好的 wtxlog 代码拷贝到 BAE 本地目录</li>
<li>通过 SVN/GIT 上传所有文件</li>
<li>上传之后发布到最新版本</li>
</ol>
<p>接下来: <a class="reference internal" href="#database-init"><span class="std std-ref">数据库初始化</span></a> , <a class="reference internal" href="#adminer"><span class="std std-ref">网站管理员</span></a></p>
</div>
<div class="section" id="sae">
<h3>1.2.3. SAE环境<a class="headerlink" href="#sae" title="Permalink to this headline">¶</a></h3>
<p>参考: <a class="reference internal" href="#secret-key"><span class="std std-ref">SECRET_KEY</span></a>, <a class="reference internal" href="#cache"><span class="std std-ref">缓存Cache</span></a></p>
<p><strong>准备工作:</strong></p>
<ol class="arabic">
<li><p class="first">申请 SAE 开发账号, 创建 Python Web 应用</p>
<p>SAE 新手入门: <a class="reference external" href="http://sae.sina.com.cn/doc/tutorial/index.html">http://sae.sina.com.cn/doc/tutorial/index.html</a></p>
</li>
<li><p class="first">进入 SAE 应用管理控制台</p>
</li>
<li><p class="first">在服务管理中初始化 MySQL 数据库</p>
</li>
<li><p class="first">在服务管理中初始化 Memcache</p>
</li>
<li><p class="first">使用 SVN 工具将代码 checkout 到本地</p>
</li>
</ol>
<p><strong>更改设置:</strong></p>
<ol class="arabic">
<li><p class="first">从 <a class="reference external" href="https://github.com/wtx358/wtxlog/">https://github.com/wtx358/wtxlog/</a> 下载 wtxlog 最新源代码</p>
</li>
<li><p class="first">修改应用信息, 编辑根目录下的 <code class="docutils literal"><span class="pre">config.yaml</span></code> 文件</p>
<p>将 <code class="docutils literal"><span class="pre">config.yaml</span></code> 的 <code class="docutils literal"><span class="pre">name</span></code> 和 <code class="docutils literal"><span class="pre">version</span></code> 改为你自己的:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">name</span><span class="p">:</span> <span class="n">appname</span>
<span class="n">version</span><span class="p">:</span> <span class="mi">1</span>
</pre></div>
</div>
</li>
<li><p class="first">更改设置, 编辑根目录下的 <code class="docutils literal"><span class="pre">config.py</span></code> 文件</p>
<p>更改 <code class="docutils literal"><span class="pre">SECRET_KEY</span></code> (位于 <code class="docutils literal"><span class="pre">Config</span></code> 类):</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;SECRET_KEY&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="s">&#39;hard to guess string&#39;</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">SECRET_KEY</span></code> 可使用 <code class="docutils literal"><span class="pre">os.urandom(24)</span></code> 随机生成.</p>
<p>缓存设置(位于 <code class="docutils literal"><span class="pre">SAEConfig</span></code> 类), SAE 内置 Memcached 缓存服务,
需要在控制面板初始化:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">CACHE_TYPE</span> <span class="o">=</span> <span class="s">&#39;memcached&#39;</span>
</pre></div>
</div>
<p>若没有初始化 Memcached 服务或者方便调试, 请把 <code class="docutils literal"><span class="pre">CACHE_TYPE</span></code> 注释掉.</p>
</li>
</ol>
<p><strong>安装依赖:</strong></p>
<p>SAE 预装有一些模块, 但有些版本比较旧, 且不支持通过 <code class="docutils literal"><span class="pre">requirements.txt</span></code>
自动安装依赖, 所以只能把依赖包导出来, 连同代码一起上传到 SVN 代码库.</p>
<p>基本思路: 先本地通过 virtualenv 安装好依赖, 然后利用 <code class="docutils literal"><span class="pre">bundle.py</span></code> 导出依赖,
最后复制到应用根目录下的 <code class="docutils literal"><span class="pre">mydeps</span></code> 或者 <code class="docutils literal"><span class="pre">deps</span></code> 目录.</p>
<p><strong>步骤如下:</strong></p>
<ol class="arabic">
<li><p class="first">使用 <code class="docutils literal"><span class="pre">virtualenv</span></code> 创建一个 pip 虚拟环境, 并进入:</p>
<p>LINUX:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">virtualenv</span> <span class="n">myenv</span>
<span class="n">source</span> <span class="n">myenv</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>
</pre></div>
</div>
<p>WINDOWS:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">virtualenv</span> <span class="n">myenv</span>
<span class="n">myenv</span>\<span class="n">Scripts</span>\<span class="n">activate</span><span class="o">.</span><span class="n">bat</span>
</pre></div>
</div>
</li>
<li><p class="first">把 <code class="docutils literal"><span class="pre">requirements/common.txt</span></code> 复制到当前目录, 并命名为 <code class="docutils literal"><span class="pre">requirements.txt</span></code></p>
</li>
<li><p class="first">使用 <code class="docutils literal"><span class="pre">requirements.txt</span></code> 安装依赖包:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
</li>
<li><p class="first">使用 <code class="docutils literal"><span class="pre">bundle_local.py</span></code> 导出依赖包:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">python</span> <span class="n">bundle_local</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">r</span> <span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>PS: <code class="docutils literal"><span class="pre">bundle_local.py</span></code> 可在 <a class="reference external" href="https://github.com/sinacloud/sae-python-dev-guide">https://github.com/sinacloud/sae-python-dev-guide</a> 找到.</p>
</li>
<li><p class="first">现在当前目录下会有一个 <code class="docutils literal"><span class="pre">virtualenv.bundle</span></code> 目录,
把 <code class="docutils literal"><span class="pre">virtualenv.bundle</span></code> 目录下的所有内容复制到 <code class="docutils literal"><span class="pre">mydeps</span></code> 或者 <code class="docutils literal"><span class="pre">deps</span></code> 目录即可.</p>
<p>虽然 SAE 支持 <code class="docutils literal"><span class="pre">virtualenv.bundle.zip</span></code> 这种依赖包导入方式, 但经过测试,
会引发一些不可控的问题, 所以不建议使用这种方式.</p>
</li>
</ol>
<p><strong>上传:</strong></p>
<ol class="arabic simple">
<li>将前面修改好的 wtxlog 代码拷贝到 SAE 本地目录</li>
<li>使用 SVN 上传所有文件</li>
<li>代码上传后应用引擎会自动部署代码</li>
</ol>
<p>接下来: <a class="reference internal" href="#database-init"><span class="std std-ref">数据库初始化</span></a>, <a class="reference internal" href="#adminer"><span class="std std-ref">网站管理员</span></a></p>
</div>
<div class="section" id="jae">
<h3>1.2.4. JAE环境<a class="headerlink" href="#jae" title="Permalink to this headline">¶</a></h3>
<p>参考: <a class="reference internal" href="#secret-key"><span class="std std-ref">SECRET_KEY</span></a> , <a class="reference internal" href="#database"><span class="std std-ref">数据库配置</span></a></p>
<p><strong>准备工作</strong></p>
<ol class="arabic simple">
<li>申请 JAE 开发账号, 新建应用, <strong>应用服务器类型</strong> 选择 <strong>Python-Web</strong></li>
<li>进入 JAE 应用引擎控制台</li>
<li>在云数据库中新建 MySQL 数据库, 记下数据库相关信息, 后面会用到</li>
<li>使用 GIT 工具将代码 clone 到本地</li>
</ol>
<p><strong>更改设置:</strong></p>
<ol class="arabic">
<li><p class="first">从 <a class="reference external" href="https://github.com/wtx358/wtxlog/">https://github.com/wtx358/wtxlog/</a> 下载 wtxlog 最新源代码</p>
</li>
<li><p class="first">编辑根目录下的 <code class="docutils literal"><span class="pre">config.py</span></code> 文件</p>
<p>更改 <code class="docutils literal"><span class="pre">SECRET_KEY</span></code> (位于 <code class="docutils literal"><span class="pre">Config</span></code> 类):</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;SECRET_KEY&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="s">&#39;hard to guess string&#39;</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">SECRET_KEY</span></code> 可使用 <code class="docutils literal"><span class="pre">os.urandom(24)</span></code> 随机生成.</p>
<p>更改 JAE 相关信息(位于 <code class="docutils literal"><span class="pre">JAEConfig</span></code> 类):</p>
<div class="highlight-default"><div class="highlight"><pre><span class="c"># mysql configuration</span>
<span class="n">MYSQL_USER</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
<span class="n">MYSQL_PASS</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
<span class="n">MYSQL_HOST</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
<span class="n">MYSQL_PORT</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
<span class="n">MYSQL_DB</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
</pre></div>
</div>
</li>
</ol>
<p><strong>设置依赖:</strong></p>
<p>修改根目录 <code class="docutils literal"><span class="pre">requirements.txt</span></code> 文件内容如下:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="o">-</span><span class="n">r</span> <span class="n">requirements</span><span class="o">/</span><span class="n">jae</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>应用引擎会自动安装依赖.</p>
<p><strong>上传:</strong></p>
<ol class="arabic">
<li><p class="first">将前面修改好的 wtxlog 代码拷贝到 BAE 本地目录</p>
</li>
<li><p class="first">通过 GIT 上传所有文件</p>
</li>
<li><p class="first">上传之后进行快速部署</p>
<p>PS: 如果部署不成功, 多试几次, 或者加大内存再试.</p>
</li>
</ol>
<p>接下来: <a class="reference internal" href="#database-init"><span class="std std-ref">数据库初始化</span></a>, <a class="reference internal" href="#adminer"><span class="std std-ref">网站管理员</span></a></p>
</div>
<div class="section" id="id5">
<h3>1.2.5. 生产环境<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>推荐使用 Nginx + Gunicorn + Supervisor 这种相对简单的部署方式.</p>
<p><strong>安装 Supervisor:</strong></p>
<p>Supervisor 通过 easy_install 或 pip 在系统级别安装:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">easy_install</span> <span class="n">supervisor</span>
</pre></div>
</div>
<p>或者:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">pip</span> <span class="n">install</span> <span class="n">supervisor</span>
</pre></div>
</div>
<p><strong>安装 Gunicorn:</strong></p>
<p>Gunicorn 通过 Virtualenv 在虚拟环境安装:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">pip</span> <span class="n">install</span> <span class="n">gunicorn</span><span class="o">==</span><span class="mf">18.0</span>
</pre></div>
</div>
<p><strong>安装依赖:</strong></p>
<p>安装 <code class="docutils literal"><span class="pre">requirements/common.txt</span></code> 中的依赖即可:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">requirements</span><span class="o">/</span><span class="n">common</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p><strong>配置文件:</strong></p>
<p>注意: <code class="docutils literal"><span class="pre">{{approot}}</span></code> 为 wtxlog 应用程序实际所在绝对路径, 请替换为实际路径.</p>
<p>Supervisor 配置:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="p">[</span><span class="n">program</span><span class="p">:</span><span class="n">wtxlog</span><span class="p">]</span>
<span class="n">user</span><span class="o">=</span><span class="n">www</span>
<span class="n">directory</span><span class="o">=</span><span class="p">{{</span><span class="n">approot</span><span class="p">}}</span>
<span class="n">command</span><span class="o">=/</span><span class="nb">bin</span><span class="o">/</span><span class="n">env</span> <span class="n">env</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">gunicorn</span> <span class="o">-</span><span class="n">b</span> <span class="n">unix</span><span class="p">:</span><span class="n">app_wtxlog</span><span class="o">.</span><span class="n">sock</span> <span class="n">manage</span><span class="p">:</span><span class="n">app</span>
<span class="n">process_name</span><span class="o">=%</span><span class="p">(</span><span class="n">program_name</span><span class="p">)</span><span class="n">s</span>
<span class="n">numprocs</span><span class="o">=</span><span class="mi">1</span>
<span class="n">autostart</span><span class="o">=</span><span class="n">true</span>
<span class="n">autorestart</span><span class="o">=</span><span class="n">true</span>
<span class="n">stopsignal</span><span class="o">=</span><span class="n">QUIT</span>
<span class="n">redirect_stderr</span><span class="o">=</span><span class="n">true</span>
</pre></div>
</div>
<p>Nginx 配置:</p>
<div class="highlight-default"><div class="highlight"><pre>server
{
    server_name example.com;

    set $approot {{approot}};
    root $approot/wtxlog;

    location / { try_files $uri @myapp; }
    location @myapp {
        proxy_pass http://unix:$approot/app_wtxlog.sock;
        proxy_redirect off;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }

    location ~ .*\.(gif|jpg|jpeg|png|bmp|swf)$
    {
        expires      30d;
    }

    location ~ .*\.(js|css)?$
    {
        expires      12h;
    }

    location ^~ /admin/static/ {
        alias $approot/wtxlog/static/admin/;
        expires 30d;
    }

    location ^~ /_themes/imtx/ {
        alias $approot/wtxlog/themes/imtx/static/;
        expires 10d;
    }

    access_log  /path/to/example.com.log  access;
}
</pre></div>
</div>
</div>
<div class="section" id="database-init">
<span id="id6"></span><h3>1.2.6. 数据库初始化<a class="headerlink" href="#database-init" title="Permalink to this headline">¶</a></h3>
<p><strong>方法1</strong></p>
<p>若拥有操作系统的操作权, 可通过下面的方法初始化:</p>
<div class="highlight-default"><div class="highlight"><pre>$ python manage.py deploy
</pre></div>
</div>
<p><strong>方法2</strong></p>
<p>在应用引擎中, 通过导入 <code class="docutils literal"><span class="pre">schema.sql</span></code> 文件的方法初始化数据库.</p>
</div>
<div class="section" id="adminer">
<span id="id7"></span><h3>1.2.7. 网站管理员<a class="headerlink" href="#adminer" title="Permalink to this headline">¶</a></h3>
<p><strong>方法1</strong></p>
<p>在 <code class="docutils literal"><span class="pre">config.py</span></code> 中设置好之后, 在网页上用对应的邮箱注册账号并激活即可.</p>
<p><strong>方法2</strong></p>
<p>先注册账号, 然后修改数据库相关记录, 然后修改下面两个字段的值:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">role_id</span></code> 设置为 <code class="docutils literal"><span class="pre">Administrator</span></code> 对应的数值</li>
<li><code class="docutils literal"><span class="pre">confirmed</span></code> 设置为逻辑真(或者数值1)</li>
</ul>
</div>
</div>
<div class="section" id="id8">
<h2>1.3. 配置信息<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id9">
<h3>1.3.1. 内置的配置值<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>THEME</td>
<td>主题(模板)的名称</td>
</tr>
<tr class="row-even"><td>SITE_NAME</td>
<td>站点名称</td>
</tr>
<tr class="row-odd"><td>BLOG_MODE</td>
<td>博客模式, 默认为 <code class="docutils literal"><span class="pre">True</span></code>, 如果要做为 CMS, 则设为 <code class="docutils literal"><span class="pre">False</span></code></td>
</tr>
<tr class="row-even"><td>BODY_FORMAT</td>
<td>正文格式, 支持 MARKDOWN 和 HTML 两种</td>
</tr>
<tr class="row-odd"><td>SECRET_KEY</td>
<td>密钥, 必须设置, 很重要</td>
</tr>
<tr class="row-even"><td>MAIL_SERVER</td>
<td>邮件服务器地址</td>
</tr>
<tr class="row-odd"><td>MAIL_PORT</td>
<td>邮件服务器端口, 默认为25</td>
</tr>
<tr class="row-even"><td>MAIL_USERNAME</td>
<td>邮件服务器用户名, 注意是明文的</td>
</tr>
<tr class="row-odd"><td>MAIL_PASSWORD</td>
<td>邮件服务器用户密码, 注意是明文的</td>
</tr>
<tr class="row-even"><td>MAIL_USE_TLS</td>
<td>使用 TLS 连接, GMAIL邮箱需要设置为 <code class="docutils literal"><span class="pre">True</span></code></td>
</tr>
<tr class="row-odd"><td>MAIL_USE_SSL</td>
<td>使用 SSL 连接, QQ企业邮箱需要设置为 <code class="docutils literal"><span class="pre">True</span></code></td>
</tr>
<tr class="row-even"><td>APP_ADMIN</td>
<td>网站管理员邮箱</td>
</tr>
<tr class="row-odd"><td>CACHE_TYPE</td>
<td>缓存类型, 有 <code class="docutils literal"><span class="pre">simple</span></code>, <code class="docutils literal"><span class="pre">memcached</span></code>, <code class="docutils literal"><span class="pre">filesystem</span></code>,
<code class="docutils literal"><span class="pre">wtxlog.ext.baememcache</span></code> 4 种.</td>
</tr>
<tr class="row-even"><td>CACHE_KEY</td>
<td>缓存名称, 默认值为 <code class="docutils literal"><span class="pre">view/%s</span></code></td>
</tr>
<tr class="row-odd"><td>CACHE_DEFAULT_TIMEOUT</td>
<td>缓存过期时间, 默认为 300 秒</td>
</tr>
<tr class="row-even"><td>CACHE_KEY_PREFIX</td>
<td>内存类缓存前缀, 只对 RedisCache/MemcachedCache/GAEMemcachedCache 有效</td>
</tr>
<tr class="row-odd"><td>QINIU_AK</td>
<td>七牛云存储 API Key</td>
</tr>
<tr class="row-even"><td>QINIU_SK</td>
<td>七牛云存储 Secret Key</td>
</tr>
<tr class="row-odd"><td>QINIU_BUCKET</td>
<td>七牛云存储 bucket 名称</td>
</tr>
<tr class="row-even"><td>QINIU_DOMAIN</td>
<td>七牛云存储域名, 默认为 <code class="docutils literal"><span class="pre">bucket.qiniudn.com</span></code></td>
</tr>
<tr class="row-odd"><td>BAE_AK</td>
<td>BAE 应用引擎 API Key</td>
</tr>
<tr class="row-even"><td>BAE_SK</td>
<td>BAE 应用引擎 Secret Key</td>
</tr>
<tr class="row-odd"><td>CACHE_BAE_SERVERS</td>
<td>BAE CACHE 服务主机地址</td>
</tr>
<tr class="row-even"><td>CACHE_BAE_ID</td>
<td>BAE CACHE 服务名称</td>
</tr>
<tr class="row-odd"><td>CACHE_BAE_USERNAME</td>
<td>BAE CACHE 服务用户名, 默认与 <code class="docutils literal"><span class="pre">BAE_AK</span></code> 相同</td>
</tr>
<tr class="row-even"><td>CACHE_BAE_PASSWORD</td>
<td>BAE CACHE 服务用户密码, 默认与 <code class="docutils literal"><span class="pre">BAE_SK</span></code> 相同</td>
</tr>
<tr class="row-odd"><td>MYSQL_HOST</td>
<td>MYSQL 主机地址</td>
</tr>
<tr class="row-even"><td>MYSQL_PORT</td>
<td>MYSQL 主机端口</td>
</tr>
<tr class="row-odd"><td>MYSQL_USER</td>
<td>MYSQL 用户名</td>
</tr>
<tr class="row-even"><td>MYSQL_PASS</td>
<td>MYSQL 用户密码</td>
</tr>
<tr class="row-odd"><td>MYSQL_DB</td>
<td>MYSQL 数据库名称</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="smtp">
<h3>1.3.2. 管理员邮箱及SMTP信息<a class="headerlink" href="#smtp" title="Permalink to this headline">¶</a></h3>
<p>编辑 <code class="docutils literal"><span class="pre">config.py</span></code>, 找到下面的内容(位于 <code class="docutils literal"><span class="pre">Config</span></code> 类), 并修改为自己对应的信息即可:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">MAIL_SERVER</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;MAIL_SERVER&#39;</span><span class="p">)</span>
<span class="n">MAIL_PORT</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;MAIL_PORT&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="mi">25</span><span class="p">)</span>
<span class="n">MAIL_USERNAME</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;MAIL_USERNAME&#39;</span><span class="p">)</span>
<span class="n">MAIL_PASSWORD</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;MAIL_PASSWORD&#39;</span><span class="p">)</span>
<span class="c">#MAIL_USE_TLS = True</span>

<span class="n">APP_MAIL_SUBJECT_PREFIX</span> <span class="o">=</span> <span class="s">&#39;[%s]&#39;</span> <span class="o">%</span> <span class="n">SITE_NAME</span>
<span class="n">APP_MAIL_SENDER</span> <span class="o">=</span> <span class="s">&#39;%s Admin &lt;%s&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SITE_NAME</span><span class="p">,</span> <span class="n">MAIL_USERNAME</span><span class="p">)</span>
<span class="n">APP_ADMIN</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;APP_ADMIN&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>示例:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">MAIL_SERVER</span> <span class="o">=</span> <span class="s">&#39;smtp.126.com&#39;</span>
<span class="n">MAIL_PORT</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;MAIL_PORT&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="mi">25</span><span class="p">)</span>
<span class="n">MAIL_USERNAME</span> <span class="o">=</span> <span class="s">&#39;test01@126.com&#39;</span>
<span class="n">MAIL_PASSWORD</span> <span class="o">=</span> <span class="s">&#39;yourpassword&#39;</span>
<span class="c">#MAIL_USE_TLS = True</span>

<span class="n">APP_MAIL_SUBJECT_PREFIX</span> <span class="o">=</span> <span class="s">&#39;[%s]&#39;</span> <span class="o">%</span> <span class="n">SITE_NAME</span>
<span class="n">APP_MAIL_SENDER</span> <span class="o">=</span> <span class="s">&#39;%s Admin &lt;%s&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SITE_NAME</span><span class="p">,</span> <span class="n">MAIL_USERNAME</span><span class="p">)</span>
<span class="n">APP_ADMIN</span> <span class="o">=</span> <span class="s">&#39;myadmin@126.com&#39;</span>
</pre></div>
</div>
<p>说明: 因为有些 SMTP 服务器强制要求发件地址与发件人一致(以防发送假冒邮件),
所以建议 <code class="docutils literal"><span class="pre">MAIL_USERNAME</span></code> 设置为完整邮件地址.</p>
</div>
<div class="section" id="id10">
<h3>1.3.3. 七牛云存储接口信息<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<p>编辑 <code class="docutils literal"><span class="pre">config.py</span></code>, 找到下面的内容(位于 <code class="docutils literal"><span class="pre">Config</span></code> 类), 并修改为自己对应的信息即可:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="c"># QiNiu Cloud Storage</span>
<span class="n">QINIU_AK</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;QINIU_AK&#39;</span><span class="p">)</span>
<span class="n">QINIU_SK</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;QINIU_SK&#39;</span><span class="p">)</span>
<span class="n">QINIU_BUCKET</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;QINIU_BUCKET&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>说明: 虽然各个引用引擎都提供云存储功能, 但接口差别比较大, 为了方便和统一,
决定使用第三方云存储来存储上传的文件.</p>
<p>七牛云存储官网: <a class="reference external" href="http://www.qiniu.com/">http://www.qiniu.com/</a></p>
</div>
<div class="section" id="id11">
<h3>1.3.4. 静态文件映射<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<p>默认情况下已经根据各平台对静态文件映射进行处理了, JAE 目前不支持静态映射.</p>
<p>特别说明: 如果新增加主题模板, 则需要在 <code class="docutils literal"><span class="pre">app.conf</span></code> 或 <code class="docutils literal"><span class="pre">config.yaml</span></code> 增加映射关系.</p>
</div>
<div class="section" id="id12">
<h3>1.3.5. 网站名称<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<p>编辑 <code class="docutils literal"><span class="pre">config.py</span></code>, 找到下面的内容(位于 <code class="docutils literal"><span class="pre">Config</span></code> 类), 并修改为自己对应的信息即可:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">SITE_NAME</span> <span class="o">=</span> <span class="s">u&#39;wtxlog&#39;</span>
</pre></div>
</div>
<p>注意是 Unicode 类型的.</p>
</div>
<div class="section" id="secret-key">
<span id="id13"></span><h3>1.3.6. SECRET_KEY<a class="headerlink" href="#secret-key" title="Permalink to this headline">¶</a></h3>
<p>编辑 <code class="docutils literal"><span class="pre">config.py</span></code>, 找到下面的内容(位于 <code class="docutils literal"><span class="pre">Config</span></code> 类), 并修改为自己对应的信息即可:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;SECRET_KEY&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="s">&#39;hard to guess string&#39;</span>
</pre></div>
</div>
<p>小提示: 可以使用 <code class="docutils literal"><span class="pre">os.urandom(24)</span></code> 来生成随机字符串.</p>
<p>示例:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s">&#39;6</span><span class="se">\xbb</span><span class="s">yVZ</span><span class="se">\xe7\xb5\x80\xff\xcf\xae</span><span class="s">`*</span><span class="se">\xf3</span><span class="s">2</span><span class="se">\x82\xcf</span><span class="s">=</span><span class="se">\xf9\x97</span><span class="s">z</span><span class="se">\x01</span><span class="s">_&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="cache">
<span id="id14"></span><h3>1.3.7. 缓存Cache<a class="headerlink" href="#cache" title="Permalink to this headline">¶</a></h3>
<p>应用程序引擎一般会支持 Memcached 缓存(或者兼容 Memcached),
云主机(VPS)可使用 Memcached 或者 FileSystemCache.</p>
<p><strong>SAE</strong></p>
<p>SAE不需要设置, 只需要在控制面板初始化 Memcached 即可.</p>
<p>若需要禁用缓存或者方便调试, 请设置 <code class="docutils literal"><span class="pre">SAEConfig.CACHE_TYPE</span></code> 的值.</p>
<p><strong>BAE</strong></p>
<p>若要使用缓存, 需要先在扩展服务里申请 <strong>Cache 服务</strong>, 并填写 Cache 相关信息.</p>
<p>编辑 <code class="docutils literal"><span class="pre">config.py</span></code>, 找到下面的内容(位于 <code class="docutils literal"><span class="pre">BAEConfig</span></code> 类), 并修改为自己对应的信息即可:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="c"># BAE MEMCACHE</span>
<span class="n">CACHE_TYPE</span> <span class="o">=</span> <span class="s">&#39;wtxlog.ext.baememcache&#39;</span>
<span class="n">CACHE_BAE_USERNAME</span> <span class="o">=</span> <span class="n">BAE_AK</span>
<span class="n">CACHE_BAE_PASSWORD</span> <span class="o">=</span> <span class="n">BAE_SK</span>
<span class="n">CACHE_BAE_SERVERS</span> <span class="o">=</span> <span class="s">&#39;cache.duapp.com:20243&#39;</span>
<span class="n">CACHE_BAE_ID</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">BAE_AK</span></code>, <code class="docutils literal"><span class="pre">BAE_SK</span></code> 需要预先定义.</p>
<p><strong>JAE</strong></p>
<p>JAE 目前不支持 Memcached 缓存.</p>
<p><strong>云主机/VPS</strong></p>
<p>默认启用 Memcached 缓存.</p>
<p>若要启用 FileSystemCache, 编辑 <code class="docutils literal"><span class="pre">config.py</span></code>,
找到下面的内容(位于 <code class="docutils literal"><span class="pre">ProductionConfig</span></code> 类), 把注释取消掉:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="c"># memcached type configuration values</span>
<span class="n">CACHE_TYPE</span> <span class="o">=</span> <span class="s">&#39;memcached&#39;</span>
<span class="n">CACHE_MEMCACHED_SERVERS</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;127.0.0.1:11211&#39;</span><span class="p">]</span>

<span class="c"># filesystem type configuration values</span>
<span class="c">#CACHE_TYPE = &#39;filesystem&#39;</span>
<span class="c">#CACHE_DIR = os.path.join(basedir, &#39;data&#39;, &#39;cache&#39;)</span>
</pre></div>
</div>
</div>
<div class="section" id="database">
<span id="id15"></span><h3>1.3.8. 数据库配置<a class="headerlink" href="#database" title="Permalink to this headline">¶</a></h3>
<p>本地环境或者虚拟主机可以使用 SQLite 数据库, 但 BAE, SAE, JAE 目前只能使用 MySQL 数据库.</p>
<p><strong>BAE</strong></p>
<p>编辑 <code class="docutils literal"><span class="pre">config.py</span></code>, 找到下面的内容(位于 <code class="docutils literal"><span class="pre">BAEConfig</span></code> 类中), 并修改为自己对应的信息即可:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="c"># mysql config</span>
<span class="n">MYSQL_USER</span> <span class="o">=</span> <span class="n">BAE_AK</span>
<span class="n">MYSQL_PASS</span> <span class="o">=</span> <span class="n">BAE_SK</span>
<span class="n">MYSQL_HOST</span> <span class="o">=</span> <span class="s">&#39;sqld.duapp.com&#39;</span>
<span class="n">MYSQL_PORT</span> <span class="o">=</span> <span class="s">&#39;4050&#39;</span>
<span class="n">MYSQL_DB</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">BAE_AK</span></code>, <code class="docutils literal"><span class="pre">BAE_SK</span></code> 需要预先定义.</p>
<p><strong>SAE</strong></p>
<p>SAE 环境数据库信息可以通过应用引擎常量获取, 无需手动设置.</p>
<p><strong>JAE</strong></p>
<p>编辑 <code class="docutils literal"><span class="pre">config.py</span></code>, 找到下面的内容(位于 <code class="docutils literal"><span class="pre">JAEConfig</span></code> 类中), 并修改为自己对应的信息即可:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="c"># mysql config</span>
<span class="n">MYSQL_USER</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
<span class="n">MYSQL_PASS</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
<span class="n">MYSQL_HOST</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
<span class="n">MYSQL_PORT</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
<span class="n">MYSQL_DB</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="favicon-ico">
<h3>1.3.9. 网站图标 favicon.ico<a class="headerlink" href="#favicon-ico" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">favicon.ico</span></code> 默认路径为 <code class="docutils literal"><span class="pre">wtxlog/static/favicon.ico</span></code>, 若有需要, 直接替换即可.
建议尺寸 16x16 或者 32x32.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">1. 应用部署</a><ul>
<li><a class="reference internal" href="#id2">1.1. 运行环境</a></li>
<li><a class="reference internal" href="#id3">1.2. 部署应用</a><ul>
<li><a class="reference internal" href="#id4">1.2.1. 本地环境</a></li>
<li><a class="reference internal" href="#bae">1.2.2. BAE环境</a></li>
<li><a class="reference internal" href="#sae">1.2.3. SAE环境</a></li>
<li><a class="reference internal" href="#jae">1.2.4. JAE环境</a></li>
<li><a class="reference internal" href="#id5">1.2.5. 生产环境</a></li>
<li><a class="reference internal" href="#database-init">1.2.6. 数据库初始化</a></li>
<li><a class="reference internal" href="#adminer">1.2.7. 网站管理员</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id8">1.3. 配置信息</a><ul>
<li><a class="reference internal" href="#id9">1.3.1. 内置的配置值</a></li>
<li><a class="reference internal" href="#smtp">1.3.2. 管理员邮箱及SMTP信息</a></li>
<li><a class="reference internal" href="#id10">1.3.3. 七牛云存储接口信息</a></li>
<li><a class="reference internal" href="#id11">1.3.4. 静态文件映射</a></li>
<li><a class="reference internal" href="#id12">1.3.5. 网站名称</a></li>
<li><a class="reference internal" href="#secret-key">1.3.6. SECRET_KEY</a></li>
<li><a class="reference internal" href="#cache">1.3.7. 缓存Cache</a></li>
<li><a class="reference internal" href="#database">1.3.8. 数据库配置</a></li>
<li><a class="reference internal" href="#favicon-ico">1.3.9. 网站图标 favicon.ico</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">wtxlog (Flask BLOG/CMS)</a></li>
      <li>Next: <a href="models.html" title="next chapter">2. 模型</a></li>
  </ul></li>
</ul>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/installation.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="footer">
    &copy; Copyright 2014-2015, digwtx.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>
  
  </body>
</html>